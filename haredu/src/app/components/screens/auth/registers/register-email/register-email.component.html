<div id="auth">
  <div nz-row class="container">
    <nz-card
      nz-col
      nzLg="8"
      [nzSpan]="24"
      class="bg-white py-2 px-4 sm:py-4 sm:px-7 xl:py-7 xl:px-7 rounded-lg relative"
    >
      <form nz-form [formGroup]="formGroup" nzLayout="vertical" (submit)="onSubmit($event)">
        <div class="logo-container">
          <img class="logo-image" [src]="logo.images" [alt]="logo.name" />
          <span class="pl-3 logo-name auth-title">{{ logo.name }}</span>
        </div>
        <p class="mb-0 font-bold auth-title mt-5 lg:mt-6" nz-typography>
          {{ 'common.register' | transloco: { sign: '!' } }}
        </p>

        <nz-form-item class="lg:mt-5">
          <nz-form-label nzFor="type">{{ 'screens.auth.role' | transloco }}</nz-form-label>
          <nz-form-control [nzErrorTip]="error">
            <nz-select (blur)="onBlur('role')" formControlName="role">
              <nz-option *ngFor="let role of userRole" [nzValue]="role.value" [nzLabel]="role.name"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item class="lg:mt-5">
          <nz-form-label class="p-0" [nzSpan]="24" nzFor="email">{{ 'input.label.email' | transloco }}</nz-form-label>
          <nz-form-control [nzSpan]="24" [nzErrorTip]="error">
            <nz-input-group>
              <input
                id="email"
                autofocus
                nz-input
                type="email"
                formControlName="email"
                (blur)="onBlur('email')"
                placeholder="{{ 'input.placeholder.email' | transloco }}"
              />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item class="lg:mt-5">
          <nz-form-label class="p-0" [nzSpan]="24" nzFor="password">{{
            'screens.auth.password' | transloco
          }}</nz-form-label>
          <nz-form-control [nzSpan]="24" [nzErrorTip]="error">
            <nz-input-group [nzSuffix]="passwordTemplate">
              <input
                id="password"
                autofocus
                nz-input
                autocomplete="password"
                [maxLength]="PASSWORD_MAX_LENGTH"
                [type]="passwordVisible ? 'text' : 'password'"
                formControlName="password"
                (blur)="onBlur('password')"
                placeholder="{{ 'form.placeholder.password' | transloco }}"
              />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item class="lg:mt-5">
          <nz-form-label class="p-0" [nzSpan]="24" nzFor="confirmPassword">{{
            'screens.auth.confirmPassword' | transloco
          }}</nz-form-label>
          <nz-form-control [nzSpan]="24" [nzErrorTip]="error">
            <nz-input-group [nzSuffix]="confirmPasswordTemplate">
              <input
                id="confirmPassword"
                autofocus
                nz-input
                autocomplete="confirmPassword"
                [maxLength]="PASSWORD_MAX_LENGTH"
                [type]="confirmPasswordVisible ? 'text' : 'password'"
                formControlName="confirmPassword"
                (blur)="onBlur('confirmPassword')"
                placeholder="{{ 'form.placeholder.confirmPassword' | transloco }}"
              />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>

        <div class="mt-5">
          <app-button
            ngClass="font-semibold flex justify-center"
            height="40px"
            width="100%"
            btnType="submit"
            type="primary"
            label="common.register"
          ></app-button>
        </div>
      </form>
      <ng-template #error let-control>
        <app-validation-error [control]="control"></app-validation-error>
      </ng-template>
    </nz-card>
  </div>
</div>

<ng-template #passwordTemplate>
  <span
    nz-icon
    [nzType]="passwordVisible ? 'eye-invisible' : 'eye'"
    (click)="passwordVisible = !passwordVisible"
    tabindex="1"
    (keyup.enter)="passwordVisible = !passwordVisible"
  ></span>
</ng-template>
<ng-template #confirmPasswordTemplate>
  <span
    nz-icon
    [nzType]="confirmPasswordVisible ? 'eye-invisible' : 'eye'"
    (click)="confirmPasswordVisible = !confirmPasswordVisible"
    tabindex="2"
    (keyup.enter)="confirmPasswordVisible = !confirmPasswordVisible"
  ></span>
</ng-template>
