<nz-card class="card-analytic-container rounded-md w-full">
  <form nz-form [formGroup]="formGroup">
    <div class="mt-2 flex">
      <div class="w-[50%]">
        <app-date-picker [initialDate]="last7Days" (dateRangeChanged)="dateRangeChanged($event)"></app-date-picker>
      </div>
      <div class="w-[50%] flex justify-end gap-2">
        <nz-form-item>
          <nz-form-control>
            <label nz-checkbox formControlName="plusMoney">{{ 'screens.users.plusMoney' | transloco }}</label>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-control>
            <label nz-checkbox formControlName="minusMoney">{{ 'screens.users.minusMoney' | transloco }}</label>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
  </form>
  <app-table
    #dataTable
    [data]="tableData.data"
    [pageSize]="tableData.pageSize"
    [pageIndex]="tableData.pageIndex"
    [totalItem]="tableData.totalItem"
    [tableConfig]="tableConfig"
    [height]="'500px'"
    [isLoading]="isLoading"
    (onSearch)="onSearch($event)"
    [customCell]="{ excutionTime, moneyExcution, moneyMustPay, reasonExcution, action }"
    externalClass="js-tb"
    parentClass="inner-content"
  ></app-table>
</nz-card>

<ng-template #excutionTime let-data="$data">
  {{ data.createdAt | date: 'yyyy-MM-dd HH:mm:ss' }}
</ng-template>

<ng-template #moneyExcution let-data="$data"> {{ data.changeBalance | formatBalance }} (VND) </ng-template>

<ng-template #moneyMustPay let-data="$data">
  {{ getMoneyMustPay(data.changeBalance) | formatBalance }} (VND)
</ng-template>

<ng-template #reasonExcution let-data="$data">
  {{ data.reason }}
</ng-template>

<ng-template #action let-data="$data">
  <button nz-button nzType="primary" nzSize="small" (click)="showModal(data.userId, data.changeBalance, data._id)">
    Pay
  </button>
</ng-template>
